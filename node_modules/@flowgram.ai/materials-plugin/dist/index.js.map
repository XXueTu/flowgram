{"version":3,"sources":["../src/index.ts","../src/create-materials-plugin.ts"],"sourcesContent":["export * from './create-materials-plugin';\n","import React from 'react';\n\nimport { FlowRendererKey, FlowRendererRegistry } from '@flowgram.ai/renderer';\nimport { definePluginCreator } from '@flowgram.ai/core';\n\nexport type MaterialReactComponent<T = any> = (props: T) => React.ReactNode | null;\n\nexport interface MaterialsPluginOptions {\n  /**\n   * 注册特定的 UI 组件\n   */\n  components?: Record<FlowRendererKey | string, MaterialReactComponent>;\n  /**\n   * 注册特定的节点渲染组件\n   */\n  renderNodes?: Record<string, MaterialReactComponent>;\n  /**\n   * 默认节点渲染\n   */\n  renderDefaultNode?: MaterialReactComponent;\n  /**\n   * 注册渲染的文字\n   */\n  renderTexts?: Record<string, string>;\n}\n\nexport const createMaterialsPlugin = definePluginCreator<MaterialsPluginOptions>({\n  onInit(ctx, opts) {\n    const registry = ctx.get<FlowRendererRegistry>(FlowRendererRegistry);\n    /**\n     * 注册默认节点渲染\n     */\n    registry.registerReactComponent(\n      FlowRendererKey.NODE_RENDER,\n      opts.renderDefaultNode || (() => null)\n    );\n\n    /**\n     * 注册文案\n     */\n    if (opts.renderTexts) {\n      registry.registerText(opts.renderTexts);\n    }\n    /**\n     * 注册组件\n     */\n    if (opts.components) {\n      Object.keys(opts.components).forEach((key) =>\n        registry.registerReactComponent(key, opts.components![key])\n      );\n    }\n    /**\n     * 注册单节点渲染\n     */\n    if (opts.renderNodes) {\n      Object.keys(opts.renderNodes).forEach((key) =>\n        registry.registerReactComponent(key, opts.renderNodes![key])\n      );\n    }\n  },\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEA,sBAAsD;AACtD,kBAAoC;AAuB7B,IAAM,4BAAwB,iCAA4C;AAAA,EAC/E,OAAO,KAAK,MAAM;AAChB,UAAM,WAAW,IAAI,IAA0B,oCAAoB;AAInE,aAAS;AAAA,MACP,gCAAgB;AAAA,MAChB,KAAK,sBAAsB,MAAM;AAAA,IACnC;AAKA,QAAI,KAAK,aAAa;AACpB,eAAS,aAAa,KAAK,WAAW;AAAA,IACxC;AAIA,QAAI,KAAK,YAAY;AACnB,aAAO,KAAK,KAAK,UAAU,EAAE;AAAA,QAAQ,CAAC,QACpC,SAAS,uBAAuB,KAAK,KAAK,WAAY,GAAG,CAAC;AAAA,MAC5D;AAAA,IACF;AAIA,QAAI,KAAK,aAAa;AACpB,aAAO,KAAK,KAAK,WAAW,EAAE;AAAA,QAAQ,CAAC,QACrC,SAAS,uBAAuB,KAAK,KAAK,YAAa,GAAG,CAAC;AAAA,MAC7D;AAAA,IACF;AAAA,EACF;AACF,CAAC;","names":[]}